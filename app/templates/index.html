<script>
    document.querySelectorAll("button").forEach(button => {
        button.addEventListener("click", function(event) {
            event.preventDefault(); // Zapobiegamy natychmiastowemu wysłaniu formularza

            let movie = this.getAttribute("value");
            let seatsElement = document.getElementById("seats-" + movie);
            let currentSeats = parseInt(seatsElement.textContent);

            if (currentSeats > 0) {
                this.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Rezerwuję...';
                seatsElement.textContent = currentSeats - 1;
                seatsElement.style.color = "red";

                // Wysłanie formularza do serwera po 1.5 sekundy
                setTimeout(() => {
                    let form = document.createElement("form");
                    form.method = "POST";
                    form.action = "/";
                    
                    let input = document.createElement("input");
                    input.type = "hidden";
                    input.name = "movie";
                    input.value = movie;
                    
                    form.appendChild(input);
                    document.body.appendChild(form);
                    form.submit();
                }, 1500);
            }
        });
    });
</script>
